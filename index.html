<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mobile Horror BFDI</title>
    <style>
        /* Mobile Fullscreen Setup */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: black; overflow: hidden; touch-action: manipulation;
        }
        
        #game-container { 
            position: relative; width: 100vw; height: 100vh; 
            display: flex; justify-content: center; align-items: center; 
        }

        /* Grainy Moving Noise */
        #noise-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://media.giphy.com/media/oEI9uWU0WMrQmto7bM/giphy.gif'); 
            opacity: 0.15; pointer-events: none; z-index: 50; mix-blend-mode: screen;
        }

        /* Main Office Background */
        #office { 
            width: 100%; height: 100%; 
            background-image: url('Untitled32_20251221222716.png'); 
            background-size: cover; background-position: center; background-repeat: no-repeat;
        }

        /* Touch-Friendly Buttons (Transparent with White Outline) */
        .controls { 
            position: absolute; bottom: 5%; width: 90%; 
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; z-index: 60; 
        }
        button { 
            padding: 20px 10px; cursor: pointer; 
            background: rgba(0, 0, 0, 0.4); color: white; 
            border: 3px solid white; font-weight: bold; font-size: 1.1rem;
            text-transform: uppercase; border-radius: 8px;
        }
        button:active { background: rgba(255, 255, 255, 0.4); }

        /* Jumpscare: Massive and Shaking */
        #jumpscare-overlay {
            display: none; position: absolute; top: 0; left: 0; 
            width: 100%; height: 100%; z-index: 100; background-color: black;
        }
        #jumpscare-img {
            width: 150%; height: 150%; 
            position: absolute; top: -25%; left: -25%;
            object-fit: contain;
        }

        .shake-low-fps { animation: shake-anim 0.07s steps(2) infinite; }

        @keyframes shake-anim {
            0% { transform: translate(40px, 20px) scale(1.1); }
            50% { transform: translate(-40px, -30px) scale(1.15); }
            100% { transform: translate(10px, 40px) scale(1.1); }
        }

        /* Camera Layer */
        #cam-overlay {
            display: none; position: absolute; top: 0; left: 0; 
            width: 100%; height: 100%; z-index: 40;
            background-size: cover; background-position: center;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="noise-overlay"></div>
        <div id="office"></div>
        <div id="cam-overlay"></div>

        <div id="jumpscare-overlay">
            <img id="jumpscare-img" src="" alt="Jumpscare">
        </div>

        <div class="controls">
            <button ontouchstart="setLight('left')" ontouchend="setLight('off')">Light L</button>
            <button ontouchstart="setLight('right')" ontouchend="setLight('off')">Light R</button>
            <button onclick="cycleCams()">Cameras</button>
            <button onclick="resetVent()">Vent Reset</button>
        </div>
    </div>

    <audio id="screamSfx" src="five-nights-at-freddys-full-scream-sound_2.mp3"></audio>

    <script>
        const office = document.getElementById('office');
        const jumpOverlay = document.getElementById('jumpscare-overlay');
        const jumpImg = document.getElementById('jumpscare-img');
        const scream = document.getElementById('screamSfx');
        const camOverlay = document.getElementById('cam-overlay');

        const officeStates = {
            dark: 'Untitled32_20251221222716.png',
            left: 'Untitled32_20251221221743.png',
            right: 'Untitled32_20251221221738.png'
        };

        const jumpscares = [
            'Untitled32_20251221223454.png', 
            'Untitled32_20251221223705.png', 
            'Untitled32_20251221223956.png', 
            'Untitled32_20251221223315.png'
        ];

        const camImages = [
            'Untitled31_20251221221402.png', 
            'Untitled31_20251221220901.png', 
            'Untitled31_20251221220956.png', 
            'Cam2B.webp',
            'EastHallNoCamera.webp',
            'WestHallNoCamera.webp'
        ];

        let currentCamIndex = 0;
        let camsActive = false;

        // Mobile Touch Support
        function setLight(side) {
            if (camsActive) return;
            const url = officeStates[side] || officeStates.dark;
            office.style.backgroundImage = `url('${url}')`;
        }

        function cycleCams() {
            if (!camsActive) {
                camsActive = true;
                camOverlay.style.display = 'block';
            } else {
                currentCamIndex++;
                if (currentCamIndex >= camImages.length) {
                    camsActive = false;
                    camOverlay.style.display = 'none';
                    currentCamIndex = 0;
                    return;
                }
            }
            camOverlay.style.backgroundImage = `url('${camImages[currentCamIndex]}')`;
        }

        function resetVent() {
            console.log("Ventilation clear.");
        }

        // Run this in console to test: triggerJumpscare()
        function triggerJumpscare() {
            const randomChar = jumpscares[Math.floor(Math.random() * jumpscares.length)];
            jumpImg.src = randomChar;
            jumpOverlay.style.display = 'block';
            jumpImg.classList.add('shake-low-fps');
            
            scream.currentTime = 0;
            scream.play();

            setTimeout(() => {
                jumpOverlay.style.display = 'none';
                jumpImg.classList.remove('shake-low-fps');
            }, 1200);
        }
    </script>
</body>
</html>
