<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survival Horror - BFDI Edition</title>
    <style>
        body { margin: 0; background: black; color: white; font-family: 'Courier New', Courier, monospace; overflow: hidden; }
        
        #game-container { position: relative; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; }

        /* Moving Grain/Noise Overlay */
        #noise-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://media.giphy.com/media/oEI9uWU0WMrQmto7bM/giphy.gif'); /* Moving grain texture */
            opacity: 0.15; pointer-events: none; z-index: 50; mix-blend-mode: screen;
        }

        /* Office Backgrounds */
        #office { 
            width: 100%; height: 100%; 
            background-image: url('Untitled32_20251221222716.png'); 
            background-size: cover; background-position: center; 
        }

        /* UI Buttons: Transparent with White Outline */
        .controls { position: absolute; bottom: 30px; display: flex; gap: 15px; z-index: 60; }
        button { 
            padding: 12px 20px; cursor: pointer; 
            background: transparent; color: white; 
            border: 2px solid white; font-weight: bold;
            text-transform: uppercase; transition: 0.2s;
        }
        button:hover { background: rgba(255, 255, 255, 0.2); }

        /* Jumpscare: Massive and Shaking */
        #jumpscare-overlay {
            display: none; position: absolute; top: 0; left: 0; 
            width: 100%; height: 100%; z-index: 100; background-color: black;
        }
        #jumpscare-img {
            width: 120%; height: 120%; /* Bigger than screen to allow for shaking */
            position: absolute; top: -10%; left: -10%;
            object-fit: contain;
        }

        .shake-low-fps { animation: shake-anim 0.08s steps(2) infinite; }

        @keyframes shake-anim {
            0% { transform: translate(20px, 20px) rotate(1deg); }
            50% { transform: translate(-30px, -10px) rotate(-1deg); }
            100% { transform: translate(10px, -25px) rotate(0deg); }
        }

        /* Camera View Logic */
        #cam-overlay {
            display: none; position: absolute; top: 0; left: 0; 
            width: 100%; height: 100%; z-index: 40;
            background-size: cover; background-position: center;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div id="noise-overlay"></div>
        <div id="office"></div>
        <div id="cam-overlay"></div>

        <div id="jumpscare-overlay">
            <img id="jumpscare-img" src="" alt="Jumpscare">
        </div>

        <div class="controls">
            <button onmousedown="setLight('left')" onmouseup="setLight('off')">Light Left</button>
            <button onmousedown="setLight('right')" onmouseup="setLight('off')">Light Right</button>
            <button onclick="cycleCams()">Cameras</button>
            <button onclick="resetVent()">Reset Ventilation</button>
        </div>
    </div>

    <audio id="screamSfx" src="five-nights-at-freddys-full-scream-sound_2.mp3"></audio>

    <script>
        const office = document.getElementById('office');
        const jumpOverlay = document.getElementById('jumpscare-overlay');
        const jumpImg = document.getElementById('jumpscare-img');
        const scream = document.getElementById('screamSfx');
        const camOverlay = document.getElementById('cam-overlay');

        // Assets
        const officeStates = {
            dark: 'Untitled32_20251221222716.png',
            left: 'Untitled32_20251221221743.png',
            right: 'Untitled32_20251221221738.png'
        };

        const jumpscares = [
            'Untitled32_20251221223454.png', // Leafy
            'Untitled32_20251221223705.png', // Gelatin
            'Untitled32_20251221223956.png', // Flower
            'Untitled32_20251221223315.png'  // Firey
        ];

        const camImages = [
            'Untitled31_20251221221402.png', // Cam with Gelatin
            'Untitled31_20251221220901.png', // Cam with Firey
            'Untitled31_20251221220956.png', // Cam with Leafy
            'Cam2B.webp',
            'EastHallNoCamera.webp',
            'WestHallNoCamera.webp'
        ];

        let currentCamIndex = 0;
        let camsActive = false;

        function setLight(side) {
            if (camsActive) return;
            office.style.backgroundImage = `url('${officeStates[side] || officeStates.dark}')`;
        }

        function cycleCams() {
            if (!camsActive) {
                camsActive = true;
                camOverlay.style.display = 'block';
            } else {
                currentCamIndex++;
                if (currentCamIndex >= camImages.length) {
                    camsActive = false;
                    camOverlay.style.display = 'none';
                    currentCamIndex = 0;
                    return;
                }
            }
            camOverlay.style.backgroundImage = `url('${camImages[currentCamIndex]}')`;
        }

        function resetVent() {
            // Ventilation logic can be added here
            console.log("Ventilation reset.");
        }

        function triggerJumpscare() {
            const randomChar = jumpscares[Math.floor(Math.random() * jumpscares.length)];
            jumpImg.src = randomChar;
            jumpOverlay.style.display = 'block';
            jumpImg.classList.add('shake-low-fps');
            
            scream.currentTime = 0;
            scream.volume = 1.0;
            scream.play();

            setTimeout(() => {
                jumpOverlay.style.display = 'none';
                jumpImg.classList.remove('shake-low-fps');
            }, 1200);
        }

        // To test jumpscare, you can type triggerJumpscare() in the browser console
    </script>
</body>
</html>
